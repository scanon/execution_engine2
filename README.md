# execution_engine2

This is a [KBase](https://kbase.us) module generated by the [KBase Software Development Kit (SDK)](https://github.com/kbase/kb_sdk).

You will need to have the SDK installed to use this module. [Learn more about the SDK and how to use it](https://kbase.github.io/kb_sdk_docs/).

You can also learn more about the apps implemented in this module from its [catalog page](https://narrative.kbase.us/#catalog/modules/execution_engine2) or its [spec file]($module_name.spec).

# Setup and test

See the .travis file for information on how to test

* modify test/example.env to add your token/endpoint for api tests
* modify test/example.env to add test/deploy.cfg path
* copy the test/example.env into test/test.env

# Test Running Options

## Run tests on local machine without docker (not recommended)
### Attempt to install all dependencies
* python3 -m venv venv && source venv && pip install -r requirements.txt

* make test
* make test-models

### If you cannot install dependencies on your local machine, install your python interpreter into a docker container
#### test/dockerfiles/condor/

#### For light testing just htcondor bindings
* Ensure requirements.txt is up to date
```
cd test/dockerfiles/condor/
docker build -f DockerfileForInterpreter . -t ee2_dev
docker run -ti -d --privileged=true -v /sys/fs/cgroup:/sys/fs/cgroup:ro -v /Users:/Users  ee2_dev
```


#### For full testing, including the ability for containers to be networked
* Ensure requirements.txt is up to date
* Ensure docker-compose.env is populated
```
cd /test/dockerfiles/condor
docker build -f Dockerfile . -t kbase/ee2:local_condor
#docker push kbase/ee2:local_condor
docker-compose up -d
```


# Installation from another module

To use this code in another SDK module, call `kb-sdk install execution_engine2` in the other module's root directory.

# Help

Contact @Tianhao-Gu, @bio_boris, @briehl